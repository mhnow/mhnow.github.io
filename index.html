<!DOCTYPE html>
<html>

<head>
    <title>Monster Hunter Now - Builder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            font-size: 15px;
        }

        h1 {
            text-align: center;
        }

        h3 {
            text-align: center;
        }
        .highlight-text {
            color: red; /* 원하는 텍스트 색상 지정 */
        }
        .table-wrapper {
            display: flex;
            justify-content: center;
            /* 가로 가운데 정렬을 위해 추가 */
            margin: 0 auto;
            align-content: center;
        }

        table {
            border-collapse: collapse;
            width: 55%;
            background-color: white;
            box-shadow: 0px 0px 5px 0px #888888;
        }

        table,
        th,
        td {
            border: 1px solid #dddddd;
        }

        th,
        td {
            padding: 8px;
            text-align: center;
        }   /* 드롭다운 스타일링 */
        .filter-wrapper { 
            margin: 20px 0;
            text-align: center;
        }

        label {
            padding-left: 4%;
            font-size: 18px;
            font-weight: bold;
            margin-right: 10px;
        }

        select {
            font-size: 16px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f5f5f5;
            cursor: pointer;
        }
        th {
            background-color: #f2f2f2;
        }

        ul {
            list-style-type: none;
            padding-left: 0;
        }

        ul li {
            margin-bottom: 10px;
        }

        button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
      /* 스타일링을 위한 CSS */
      .highlight {
            background-color: lightblue; /* 원하는 배경색 지정 */
        }
        button:hover {
            background-color: #0056b3;
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
        }

        .button-container button {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .button-container button:hover {
            background-color: #0056b3;
        }

        .share-button {
            display: inline-block;
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 123, 255, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        /* #selected-data-table의 크기 조절 */
        #selected-data-table {
            height: 40%;
            /* 변경된 너비 설정 */
            width: 35%;
            margin-right: 20px;
            /* 오른쪽 마진 추가 (셀 간격 조절) */
        }

        /* 스킬 구성 섹션 스타일 수정 */
        h2 {
            text-align: center;
            margin-top: 20px;
            /* 섹션 상단 마진 추가 */
        }

        #equipment-table {
            margin-right: 20px;
            /* 변경된 마진 설정 */

        }


        /* 스킬 구성 섹션 스타일 수정 */
        h2 {
            text-align: center;
            margin-top: 20px;
            /* 섹션 상단 마진 추가 */
        }
    </style>
</head>

<body>
    <h1>Monster Hunter Now - Builder</h1>
    <h3>https://blog.naver.com/huntnow</h3>   
    
    <label for="filter-select">필터:</label>
    <select id="filter-select">
        <option>스킬 선택</option>
        <option value="공격">공격</option>
        <option value="방어">방어</option>
        <option value="집중">집중</option>
        <option value="공격적인 방어">공격적인 방어</option>
    </select>
    <br>
    <br>
    <!-- 테이블 래퍼 추가 -->
    <div class="table-wrapper">
        <table id="equipment-table">
            <tr>
                <th>/</th>
                <th><img src="./mhq/weapon.png" width="24"></th>
                <th><img src="./mhq/helm.png" width="24"></th>
                <th><img src="./mhq/mail.png" width="24"></th>
                <th><img src="./mhq/gloves.png" width="24"></th>
                <th><img src="./mhq/belt.png" width="24"></th>
                <th><img src="./mhq/greaves.png" width="24"></th>
            </tr>
            <tr>
                <td><img src="./mhq/alloy.png" width="24"><br>광석</td>
                <td>독 내성2</td>
                <td>
                    <div>⦰</div>
                </td>
                <td>
                    <div>⦰</div>
                </td>
                <td>
                    <div>⦰</div>
                </td>
                <td>
                    <div>⦰</div>
                </td>
                <td>
                    <div>⦰</div>
                </td>
            </tr>

            <tr>
                <td><img src="./mhq/leather.png" width="24"><br>가죽</td>
                <td>⦰</td>
                <td id="cri">간파<br>얼음 내성</td>
                <td>공격<br>불 내성</td>
                <td>방어<br>번개 내성</td>
                <td>체력 증강<br>불 내성</td>
                <td>독 내성<br>마비 내성 </td>
            </tr>
            <tr>
                <td><img src="./mhq/g-jagr.png" width="24"><br>쟈그라스</td>
                <td>체력 증강<br>체력 증강</td>
                <td>몸통 강화<br>몸통 강화</td>
                <td>후발 주자<br>후발 주자</td>
                <td>몸통 강화<br>물속성 공격 강화</td>
                <td>불굴<br>후발 주자</td>
                <td>물속성 공격 강화<br>물속성 공격 강화</td>
            </tr>
            <tr>
                <td><img src="./mhq/kulu.png" width="24"><br>쿠루루야크</td>
                <td>불굴<br>불굴</td>
                <td>록온<br>간파</td>
                <td>근성<br>근성</td>
                <td>배수의 진<br>간파</td>
                <td>배수의 진<br>회피 거리UP</td>
                <td>간파<br>간파</td>
            </tr>
            <tr>
                <td><img src="./mhq/puke.png" width="24"><br>푸케푸케</td>
                <td>기습</td>
                <td>집중<br>체력증강<br>체력증강</td>
                <td>독 내성<br>집중</td>
                <td>독속성 강화<br>독 내성</td>
                <td>독속성 강화<br>독속성 강화</td>
                <td>체력 증강<br>독 내성</td>
            </tr>
            <tr>
                <td><img src="./mhq/barr.png" width="24"><br>볼보로스</td>
                <td>방어<br>방어</td>
                <td>방어<br>공격적인 방어</td>
                <td>공격적인 방어<br>공격적인 방어</td>
                <td>가드 성능<br>가드 성능</td>
                <td>방어<br>가드 성능</td>
                <td>반동 경감<br>방어<br>방어</td>
            </tr>
            <tr>
                <td><img src="./mhq/g-girr.png" width="24"><br>기르오스</td>
                <td>기습</td>
                <td>마비 내성<br>마비 내성</td>
                <td>마비 내성<br>기습</td>
                <td>기습<br>귀마개</td>
                <td>마비속성 강화<br>귀마개<br>귀마개</td>
                <td>마비속성 강화<br>마비속성 강화</td>
            </tr>
            <tr>
                <td><img src="./mhq/tobi.png" width="24"><br>토비 카가치</td>
                <td>회피 거리UP</td>
                <td>장전 속도<br>저스트 회피 강화</td>
                <td>회피 거리UP<br>번개속성 공격 강화</td>
                <td>회피 거리UP<br>회피 거리UP<br>저스트 회피 강화</td>
                <td>번개속성 공격 강화<br>번개속성 공격강화</td>
                <td>저스트 회피 강화<br>번개 내성</td>
            </tr>
            <tr>
                <td><img src="./mhq/paol.png" width="24"><br>파오우르무</td>
                <td>정령의 가호<br>정령의 가호</td>
                <td>특수 게이지 가속<br>풍압 내성</td>
                <td>반동 경감<br>반동 경감</td>
                <td>특수 게이지 가속<br>특수 게이지 가속<br>정령의 가호</td>
                <td>정령의 가호<br>정령의 가호</td>
                <td>풍압 내성<br>풍압 내성</td>
            </tr>
            <tr>
                <td><img src="./mhq/jyur.png" width="24"><br>쥬라도토스</td>
                <td>배수의 진</td>
                <td>물 내성<br>배수의 진</td>
                <td>물속성 공격 강화<br>배수의 진</td>
                <td>물속성 공격 강화<br>물속성 공격 강화</td>
                <td>물 내성<br>물 내성</td>
                <td>집중<br>집중<br>배수의 진</td>
            </tr>
            <tr>
                <td><img src="./mhq/anja.png" width="24"><br>안쟈나프</td>
                <td>후발 주자</td>
                <td>불속성 공격 강화<br>불속성 공격 강화<br>불 내성</td>
                <td>특수 스킬 위력 상승<br>특수 스킬 위력 상승</td>
                <td>불속성 공격 강화<br>불속성 공격 강화</td>
                <td>불 내성<br>특수 스킬 위력 상승</td>
                <td>완전 충전<br>완전 충전</td>
            </tr>
            <tr>
                <td><img src="./mhq/rathi.png" width="24"><br>리오 레이아</td>
                <td>체력 증강<br>체력 증강</td>
                <td>체력 증강<br>체력 증강<br>독속성 강화</td>
                <td>독속성 강화<br>독속성 강화</td>
                <td>락온<br>연격<br>연격</td>
                <td>독 내성<br>연격</td>
                <td>체력 증강<br>체력 증강</td>
            </tr>
            <tr>
                <td><img src="./mhq/ratha.png" width="24"><br>리오 레우스</td>
                <td>귀마개</td>
                <td>공격<br>공격<br>불속성 공격 강화</td>
                <td>약점 특효<br>약점 특효</td>
                <td>불 내성<br>공격</td>
                <td>집중<br>불속성 공격 강화</td>
                <td>불 내성<br>약점 특효</td>
            </tr>
            <tr>
                <td><img src="./mhq/legi.png" width="24"><br>레이기에나</td>
                <td>정령의 가호<br>정령의 가호</td>
                <td>정령의 가호<br>얼음속성 공격 강화</td>
                <td>정령의 가호<br>정령의 가호<br>풍압 내성<br>풍압 내성</td>
                <td>장전 속도<br>장전 속도</td>
                <td>얼음속성 공격 강화<br>풍압 내성</td>
                <td>장전 속도<br>얼음 내성</td>
            </tr>
            <tr>
                <td><img src="./mhq/diab.png" width="24"><br>디아블로스</td>
                <td>재난대처능력</td>
                <td>재난대처능력<br>재난대처능력</td>
                <td>KO술<br>재난대처능력</td>
                <td>재난대처능력<br>재난대처능력<br>파괴왕</td>
                <td>파괴왕<br>공격적인 방어</td>
                <td>KO술<br>파괴왕</td>
            </tr>
            <!-- 나머지 아이템 행 추가 -->
        </table>

        <table id="selected-data-table">
            <tr>
                <th>무기</th>
                <th>헬멧</th>
                <th>방어구</th>
                <th>장갑</th>
                <th>허리띠</th>
                <th>신발</th>
            </tr>
            <tr>
                <td><span id="selected-weapon2"></span></td>
                <td><span id="selected-helmet2"></span></td>
                <td><span id="selected-armor2"></span></td>
                <td><span id="selected-gloves2"></span></td>
                <td><span id="selected-belt2"></span></td>
                <td><span id="selected-shoes2"></span></td>
            </tr>
            <tr>
                <td colspan="6" style="text-align: left;"> <!-- colspan을 사용하여 한 행에 모든 버튼을 배치 -->
                    <b>[발동 스킬 목록]</b><br>
                    <span id="sel_items">선택된 장비가 없습니다.</span>

                </td>
            </tr>
            <tr>

                <td colspan="6"> <!-- colspan을 사용하여 한 행에 모든 버튼을 배치 -->
                    <div class="button-container">
                        <button onclick="clearSelectedData()">초기화</button>
                        <button class="share-button" onclick="shareSelectedData()">장비 세트 공유</button>
                    </div>
                </td>
            </tr>
        </table>
        <div class="toast" id="toast">데이터가 클립보드에 복사되었습니다.</div>

        <script>
            var table = document.getElementById("equipment-table");

            var selectedWeapon2 = document.getElementById("selected-weapon2");
            var selectedHelmet2 = document.getElementById("selected-helmet2");
            var selectedArmor2 = document.getElementById("selected-armor2");
            var selectedGloves2 = document.getElementById("selected-gloves2");
            var selectedBelt2 = document.getElementById("selected-belt2");
            var selectedShoes2 = document.getElementById("selected-shoes2");

            var sel_itemss = document.getElementById("sel_items");

            var toast = document.getElementById("toast");
            var w_data = "";
            var hed_data = "";
            var ar_data = "";
            var hand_data = "";
            var co_data = "";
            var sh_data = "";
            // 선택된 아이템을 저장하는 배열
            var selectedItems = [];
            var ShareUrl = "/result=";

            // 선택한 셀을 추적하는 변수
            var selectedCell = null;
            var result;

            function shareSelectedData() {
                result = result.replace(/<br>/g, "\n");
                // 나머지 코드는 그대로 유지
                var shareText = "MHNOW 빌더를 통해 구성된 스킬은 다음과 같습니다.\n\n" +
                    "[무기]" + selectedWeapon2.textContent + " 소재\n" +
                    "[헬멧]" + selectedHelmet2.textContent + " 소재\n" +
                    "[방어구]" + selectedArmor2.textContent + " 소재\n" +
                    "[장갑]" + selectedGloves2.textContent + " 소재\n" +
                    "[허리띠]" + selectedBelt2.textContent + " 소재\n" +
                    "[신발]" + selectedShoes2.textContent + " 소재\n\n" +
                    "[발동 스킬]\n" + result+"\n\nhttps://blog.naver.com/huntnow";

                // 클립보드에 복사
                var textArea = document.createElement("textarea");
                textArea.value = shareText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                // 토스트 메시지 표시
                toast.style.opacity = "1";
                setTimeout(function () {
                    toast.style.opacity = "0";
                }, 2000); // 2초 후에 투명하게 만들어서 사라지도록 설정
            }

            function clearSelectedData() {
                sel_itemss.innerHTML = "초기화 되었습니다.";
                w_data = "";
                hed_data = "";
                ar_data = "";
                hand_data = "";
                co_data = "";
                sh_data = "";
            }

            // 선택된 아이템을 저장하는 배열
            var selectedItems = ["", "", "", "", "", ""]; // 초기값을 빈 문자열로 설정

            // 선택된 아이템을 표시할 SPAN 요소들에 대한 참조
            var selectedItemsSpans = [
                document.getElementById("selected-weapon"),
                document.getElementById("selected-helmet"),
                document.getElementById("selected-armor"),
                document.getElementById("selected-gloves"),
                document.getElementById("selected-belt"),
                document.getElementById("selected-shoes")
            ];

            // 선택된 아이템의 첫 번째 열 데이터를 나타내는 변수
            var selectedItemsFirstColumnData = "";
        

            table.addEventListener("click", function (event) {
                var cell = event.target;
                if (cell.tagName === "TD") {
                    var columnIndex = cell.cellIndex;
                    var selectedItem = cell.innerText;

                    var rowIndex = cell.parentElement.rowIndex;
                    var firstColumnData = table.rows[rowIndex].cells[0].innerText;
                    var cellId = cell.id;

                    // 첫 번째 열은 몬스터명이므로 해당 열은 무시
                    if (columnIndex !== 0) {
                        switch (columnIndex) {
                            case 1:
                                selectedWeapon2.innerHTML = firstColumnData;
                                w_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                            case 2:
                                selectedHelmet2.innerHTML = firstColumnData;
                                hed_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                            case 3:
                                selectedArmor2.innerHTML = firstColumnData;
                                ar_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                            case 4:
                                selectedGloves2.innerHTML = firstColumnData;
                                hand_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                            case 5:
                                selectedBelt2.innerHTML = firstColumnData;
                                co_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                            case 6:
                                selectedShoes2.innerHTML = firstColumnData;
                                sh_data = selectedItem.replace(/\n/g, "<br>");
                                break;
                        }
                        // 주어진 문자열
                        var text = "";
                        if(w_data !=""){
                            text = text+w_data;
                        }
                        if(hed_data !=""){
                            text = text+"<br>"+hed_data;
                        }
                        if(ar_data !=""){
                            text = text+"<br>"+ar_data;
                        }
                        if(hand_data !=""){
                            text = text+"<br>"+hand_data;
                        }
                        if(co_data !=""){
                            text = text+"<br>"+co_data;
                        }
                        if(sh_data !=""){
                            text = text+"<br>"+sh_data;
                        }


                        // 줄 바꿈 문자("<br>")로 문자열을 분할하여 배열로 만듭니다.
                        var items = text.split("<br>");

                        // 중복된 항목과 그 수를 세기 위한 객체 생성
                        var itemCounts = {};

                        // 중복을 제거한 항목을 담을 배열
                        var uniqueItems = [];

                        // 배열을 순회하면서 중복된 항목을 세고, 중복을 제거한 항목을 uniqueItems 배열에 추가합니다.
                        for (var i = 0; i < items.length; i++) {
                            var item = items[i];
                            if (itemCounts[item]) {
                                itemCounts[item]++;
                            } else {
                                itemCounts[item] = 1;
                                uniqueItems.push(item);
                            }
                        }

                        // 중복된 항목이 1회 이상 나타날 때만 항목과 중복 횟수를 표시하도록 변경
                        for (var i = 0; i < uniqueItems.length; i++) {
                            var item = uniqueItems[i];
                            if (itemCounts[item] > 1) {
                                uniqueItems[i] = item + itemCounts[item];
                            }
                        }

                        // 결과 문자열 생성
                        result = uniqueItems.join("<br>");

                        console.log(result); // 결과 출력: "불굴3<br>사과"


                        sel_itemss.innerHTML = result;
                        // 선택된 아이템을 배열에 추가 또는 업데이트
                        //  selectedItems[columnIndex] = selectedItem;

                        // 현재 선택된 셀을 저장
                        selectedCell = cell;

                    }
                }

            });
        </script>
 <script>
    // JavaScript를 사용하여 드롭다운 리스트 선택에 따라 필터링 및 텍스트 색상 변경
    document.addEventListener("DOMContentLoaded", function () {
        const filterSelect = document.querySelector("#filter-select");
        
        // 드롭다운 리스트 값이 변경되었을 때 실행되는 함수
        filterSelect.addEventListener("change", function () {
            // 선택한 옵션의 값을 가져옵니다.
            const selectedValue = filterSelect.value.trim();

            // 정규식 패턴을 생성합니다. 포함되는 문구를 찾습니다.
            const regexPattern = new RegExp(selectedValue, 'i'); // 'i' 옵션은 대소문자 구분 없이 검색

            // 모든 행(row)을 가져옵니다.
            const rows = document.querySelectorAll("#equipment-table tr");

            // 각 행을 순환하면서 포함되는 문구가 있는 경우 텍스트 색상을 변경합니다.
            rows.forEach(function (row) {
                const cells = row.querySelectorAll("td");

                // 두 번째 셀부터 마지막 셀까지 반복합니다.
                for (let i = 1; i < cells.length; i++) {
                    // 셀의 텍스트를 가져옵니다.
                    const cellText = cells[i].textContent.trim(); // 공백을 제거하여 비교

                    // 포함되는 문구가 있는 경우 텍스트 색상 변경
                    if (regexPattern.test(cellText)) {
                        cells[i].classList.add("highlight-text");
                    } else {
                        cells[i].classList.remove("highlight-text");
                    }
                }
            });
        });
    });
</script>
</body>



</html>